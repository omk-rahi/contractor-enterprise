{% extends "admin-base.html" %} {% load static %}{%load crispy_forms_tags %}
{%load get_attr %} {% block main %}

<div class="center">
  <div class="w-100 border-bottom p-3 admin-search">
    <div class="container row align-items-center mx-auto">
      <p class="text-uppercase mb-0 fs-7 fw-medium col-8">{{extra.title}}</p>
      <div class="col-4 d-flex justify-content-end">
        {% if not extra.not_allow_action %}
        <a
          class="btn btn-primary text-white text-uppercase d-flex justify-content-center align-items-center gap-1"
          href="./create"
        >
          Add New&nbsp;<i data-feather="plus" width="16" height="16"></i>
        </a>

        {% else %}

        <a
          class="btn btn-primary text-white text-uppercase d-flex justify-content-center align-items-center gap-1"
          href="javascript:history.back()"
        >
          <i data-feather="arrow-left" width="16" height="16"></i>&nbsp;Back
        </a>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="container px-3">
    {% if object_list %}

    <div class="table-container">
      <!-- Table content starts here -->
      <table>
        <thead>
          <tr>
            {% for field in extra.fields %}
            <th>{{field}}</th>
            {% endfor %} {% if not extra.not_allow_action %}

            <th>Actions</th>
            {% endif %}
          </tr>
        </thead>

        <tbody>
          {% for object in object_list %}
          <tr>
            {% for field in extra.fields %} {% if field == 'image'%}
            <td>
              <img
                src="/media/{{object|get_attr:field}}"
                alt="Image of {{extra.title}}"
                width="100px"
                height="100px"
              />
            </td>
            {% else %}

            <td>{{object|get_attr:field}}</td>
            {% endif %} {% endfor %} {% if not extra.not_allow_action %}
            <td class="dropdown">
              <button
                class="btn btn-outline btn-secondary dropdown-toggle text-uppercase"
                type="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Action
              </button>

              <ul class="dropdown-menu">
                {% if extra.allow_view_detail %}

                <li>
                  <a href="./{{object.id}}" class="dropdown-item text-primary"
                    ><i data-feather="arrow-right" width="16" height="16"></i
                    >&nbsp;View Detail</a
                  >
                </li>
                {% endif %} {% if not extra.not_allow_action %}
                <li>
                  <a
                    href="./update/{{object.id}}"
                    class="dropdown-item text-warning"
                    ><i data-feather="edit" width="16" height="16"></i>&nbsp;
                    Update</a
                  >
                </li>
                <li>
                  <a
                    href="./delete/{{object.id}}"
                    class="dropdown-item text-danger"
                    ><i data-feather="trash" width="16" height="16"></i>&nbsp;
                    Delete</a
                  >
                </li>
                {% endif %}
              </ul>
            </td>
            {% endif %}
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <!-- Table content end here -->

      <!--Pagination starts here -->

      {% if page_obj.paginator.num_pages > 5 %}

      <div class="center mt-4">
        <nav aria-label="...">
          <ul class="pagination mb-4">
            {% if page_obj.has_previous %}

            <li class="page-item">
              <a
                class="page-link"
                href="?page={{page_obj.previous_page_number}}"
                ><i data-feather="arrow-left" width="24" height="24"></i
              ></a>
            </li>
            {% endif %}
            <li class="page-item active">
              <span class="page-link text-white">{{page_obj.number}}</span>
            </li>

            {% if page_obj.has_next %}
            <li class="page-item">
              <a class="page-link" href="?page={{page_obj.next_page_number}}"
                ><i data-feather="arrow-right" width="24" height="24"></i
              ></a>
            </li>
            {% endif %}
          </ul>
        </nav>
      </div>
      {% endif %}

      <!--Pagination end here -->
    </div>

    {% else %}

    <div
      class="mt-6 d-flex justify-content-center flex-column align-items-center gap-3"
    >
      <img
        src="{% static 'images/no-data.svg' %}"
        alt="No data"
        width="200px"
      />
      <p>No data found. Please add a new entry.</p>
    </div>

    {% endif %}
  </div>
</div>
{% endblock %}
